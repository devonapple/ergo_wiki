# How to set up and configure full Ergo node

This tutorial explains how to install and configure Ergo node.

## Node security

There are few important aspects of node usage your wallet and money safety depends on:
* Ergo node requires storing of security-critical parameters in the configuration file. You should never make the file public.
* Ergo node provides interface for interacting with built-in wallet through REST API. Sensitive API methods require a security token, that should not be sent via untrusted channels.

## Setting up the environment

To run Ergo node you need the JRE version >= 8 to be installed. One way to install it is to use [Oracle implementation of Java](https://www.oracle.com/technetwork/java/javase/downloads/index.html).

## Setting up an Ergo node


When the environment is ready it is time to download latest Ergo client [release](https://github.com/ergoplatform/ergo/releases/) and create a configuration file.
All parameters are described in default configuration [file](https://github.com/ergoplatform/ergo/blob/master/src/main/resources/application.conf), in your configuration file you only need to rewrite parameters that you want to change from the default values. For example, you can check the example configuration [file](https://github.com/ergoplatform/ergo/blob/master/src/main/resources/nodeTestnet/application.conf) for latest testnet.

Let ºs now take a few important steps:

1. Wallet needs to be initialized when running for the first time. Two options are available here: 
    * Initialize it from scratch (seed will be generated by the node) - POST, `/wallet/init`, 'body: {"pass": "123abc", "mnemonicPass": "098cba"}' (Note: don't forget to save mnemonic phrase the node will respond with. `mnemonicPass` field in request body is optional)
    * Restore wallet from existing seed. Choosing this option you have to provide your mnemonic phrase - POST, `/wallet/restore`, `body: {"pass": "123abc", "mnemonic": "abandon abandon ...", "mnemonicPass": "098cba"}` (Note: `mnemonicPass` field is required only in case your mnemonic phrase was protected by additional password at creation)

2. When wallet is initialized it needs to be unlocked - POST, `/wallet/unlock`, `body: {"pass": "123abc"}`. (Note: use password you chosen at initialization stage)

3. If you plan to use built-in wallet API then you should configure apiKeyHash parameter
```
scorex.restApi.apiKeyHash = "1111"
```
It is a Blake2b hash from your secret phrase that will be used to authenticate your API requests. You can use this [script](https://gist.github.com/oskin1/704ef3fba8d40bb1e7691919bf1e9cf9/) or any other script to calculate blake2b hash for that purpose (but please ensure that your secret phrase remains secret and is not sent to any untrusted services).

## Running Ergo node

To run a node from `ergo-assembly-<version>.jar` binaries and `ergo.conf` configuration file execute:
```
$ java -jar ergo-assembly-<version>.jar ergo.conf
```

To make sure node is running open `127.0.0.1:9052/info` in your browser, that will contain a general information about your node. You can use swagger `127.0.0.1:9052/swagger` to perform API requests and check full API [specification](https://github.com/ergoplatform/ergo/blob/master/src/main/resources/api/openapi.yaml) in OpenApi format. To access protected API routes, provide your secret in the request headers `[api_key, Content-Type]`, or click `Authorize` button in swagger and write down your secret there.
